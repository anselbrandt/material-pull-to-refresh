@keyframes rotate-in {
  to {
    transform: rotateZ(0.5turn);
  }
}

@keyframes fade-out {
  to {
    opacity: 0;
  }
}

#refresh > svg {
  animation: linear rotate-in;
  animation-timeline: view();
  animation-range: exit 0% exit 100%;
}

#refresh > span {
  animation: linear fade-out;
  animation-timeline: view();
  animation-range: exit -200% exit 100%;
}

/* DEMO SUPPORT */
#refresh {
  block-size: 150px;
  inline-size: 100%;
  background: hsl(0 0% 50% / 10%);
  display: grid;
  gap: 1ch;
  align-content: center;
  justify-items: center;
  position: relative;
}

#refresh::before {
  content: "";
  position: absolute;
  inset: 0;
  block-size: 10px;
  animation: delayed-snap-point 2ms forwards;
}

#refresh::after {
  content: "";
  position: absolute;
  inset: auto 0 0;
  block-size: 5px;
  background: deeppink;
  opacity: 0;
}

#refresh[loading-state="loading"]::after {
  animation: indeterminate-loading 1s ease infinite;
}

@keyframes delayed-snap-point {
  to {
    scroll-snap-align: start;
  }
}

@keyframes indeterminate-loading {
  50% {
    opacity: 1;
  }
}

#refresh > svg {
  --size: 4ch;
  fill: none;
  stroke: currentColor;
  inline-size: var(--size);
  block-size: var(--size);
}
